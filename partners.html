<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Noto+Sans+KR:wght@100..900&display=swap" rel="stylesheet">

    <title>Partner Flex Boxes</title>
    <style>
      .custom-partner-wrapper {
    max-width: 1200px;
    margin: 0 auto;
    padding: 50px 50px 100px 50px;
    font-family: "Noto Sans KR", sans-serif;
}

.custom-partner-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    position: relative;
    row-gap: 20px; /* Explicitly set row gap */
}

.custom-partner-item {
    position: relative;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 1px solid #777;
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    padding: 10px;
    box-sizing: border-box;
}

.custom-partner-item:hover {
    border-color: #bb9f52;
}

.custom-partner-item.dimmed {
    filter: brightness(0.6);
    transition: filter 0.3s ease;
}

.custom-partner-img-wrapper {
    position: relative;
    overflow: hidden;
    padding: 10px;
    box-sizing: border-box;
    width: 100%;
    aspect-ratio: 3/4;
}

.custom-partner-img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
}

.custom-partner-item:hover .custom-partner-img {
    transform: scale(1.1);
}

.custom-partner-title {
    font-family: "Noto Sans KR", sans-serif;
    font-size: 18px;
    font-weight: bold;
    margin: 10px 0 0 0;
    padding: 0 10px;
    color: #777;
    transition: color 0.3s ease;
}

.custom-partner-item:hover .custom-partner-title {
    color: #bb9f52;
}

.custom-partner-subtitle {
    font-family: "Noto Sans KR", sans-serif;
    font-size: 16px;
    color: #666;
    margin: 0;
    padding: 0 10px;
}

.custom-partner-detail {
    font-family: "Noto Sans KR", sans-serif;
    font-size: 14px;
    color: #888;
    margin-top: 15px;
    margin-bottom: 5px;
    padding: 0 10px;
}

/* Info Panel Styles */
.info-panel-wrapper {
    grid-column: 1 / -1;
    overflow: hidden;
    height: 0;
    transition: height 0.3s ease-in-out;
    position: relative;
    padding-bottom: 20px; /* Added padding-bottom */
}

.info-panel {
    background: #fff;
    border: 1px solid #bb9f52;
    border-radius: 8px;
    padding: 20px;
    position: relative;
    opacity: 0;
    transform: translateY(-20px);
    transition: opacity 0.3s ease, transform 0.3s ease;
    margin-top: 20px;
    margin-bottom: 50px; /* Added fixed margin-bottom */
}

.info-panel.active {
    opacity: 1;
    transform: translateY(0);
}

.info-panel-arrow {
    position: absolute;
    top: -10px;
    width: 20px;
    height: 20px;
    background: #fff;
    border-left: 1px solid #bb9f52;
    border-top: 1px solid #bb9f52;
    transform: rotate(45deg);
    transition: left 0.3s ease;
}

.close-button {
    position: absolute;
    top: 15px;
    right: 15px;
    width: 30px;
    height: 30px;
    border: none;
    background: none;
    cursor: pointer;
}

.close-button::before,
.close-button::after {
    content: '';
    position: absolute;
    width: 20px;
    height: 2px;
    background-color: #bb9f52;
    top: 50%;
    left: 50%;
}

.close-button::before {
    transform: translate(-50%, -50%) rotate(45deg);
}

.close-button::after {
    transform: translate(-50%, -50%) rotate(-45deg);
}

.overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0.7);
    opacity: 0;
    transition: opacity 0.3s ease;
    pointer-events: none;
    border-radius: 8px;
    z-index: 2; /* Added to ensure overlay appears above image */
}

.custom-partner-item.selected {
    border-color: #bb9f52;
    z-index: 1;
}

@media (max-width: 768px) {
    .custom-partner-wrapper {
        padding: 30px 30px 60px 30px;
    }
}

@media (max-width: 576px) {
    .custom-partner-wrapper {
        padding: 20px 20px 40px 20px;
    }

    .custom-partner-item {
        display: grid;
        grid-template-columns: 120px 1fr;
        gap: 15px;
        padding: 15px;
        height: 200px;
    }

    .custom-partner-img-wrapper {
        grid-row: 1 / span 3;
        height: 100%;
        aspect-ratio: unset;
        padding: 0;
    }

    .custom-partner-img {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s ease;
      z-index: 1; /* Added to ensure image stays below overlay */
  }

    .custom-partner-title {
        padding: 0;
        margin: 0;
        line-height: 1;
    }

    .custom-partner-subtitle {
        padding: 0;
        margin-top: -40px;
        line-height: 1;
    }

    .custom-partner-detail {
        padding: 0;
        margin-top: auto;
        margin-bottom: 0;
    }

    .info-panel {
       margin-bottom: 20px; /* Reduce bottom margin */
   }

   .info-panel-wrapper {
       margin-bottom: 0; /* Remove any additional spacing */
   }
   .custom-partner-item {
           display: grid;
           grid-template-columns: 120px 1fr;
           grid-template-rows: auto auto 1fr; /* Added explicit row template */
           gap: 15px;
           padding: 15px;
           height: 200px;
       }
       .custom-partner-title {
        padding: 0;
        margin: 0;
        line-height: 1.2;
        align-self: start; /* Align to start of grid cell */
    }
    .custom-partner-subtitle {
        padding: 0;
        margin: 0; /* Remove negative margin */
        line-height: 1.2;
        align-self: start; /* Align to start of grid cell */
    }

    .custom-partner-detail {
        padding: 0;
        margin-top: auto;
        margin-bottom: 0;
        align-self: end; /* Keep at bottom */
    }

}
    </style>
</head>
<body>
  <div class="custom-partner-wrapper">
    <div class="custom-partner-grid">
        <div class="custom-partner-item" data-partner="1">
            <div class="overlay"></div>
            <div class="custom-partner-img-wrapper">
                <img src="https://via.placeholder.com/180x270" alt="Partner 1" class="custom-partner-img">
            </div>
            <div class="custom-partner-title">Partner 1</div>
            <div class="custom-partner-subtitle">Sub Header 1</div>
            <div class="custom-partner-detail">Detail Header 1</div>
        </div>

        <div class="custom-partner-item" data-partner="2">
            <div class="overlay"></div>
            <div class="custom-partner-img-wrapper">
                <img src="https://via.placeholder.com/180x270" alt="Partner 2" class="custom-partner-img">
            </div>
            <div class="custom-partner-title">Partner 2</div>
            <div class="custom-partner-subtitle">Sub Header 2</div>
            <div class="custom-partner-detail">Detail Header 2</div>
        </div>

        <div class="custom-partner-item" data-partner="3">
            <div class="overlay"></div>
            <div class="custom-partner-img-wrapper">
                <img src="https://via.placeholder.com/180x270" alt="Partner 3" class="custom-partner-img">
            </div>
            <div class="custom-partner-title">Partner 3</div>
            <div class="custom-partner-subtitle">Sub Header 3</div>
            <div class="custom-partner-detail">Detail Header 3</div>
        </div>

        <div class="custom-partner-item" data-partner="4">
            <div class="overlay"></div>
            <div class="custom-partner-img-wrapper">
                <img src="https://via.placeholder.com/180x270" alt="Partner 4" class="custom-partner-img">
            </div>
            <div class="custom-partner-title">Partner 4</div>
            <div class="custom-partner-subtitle">Sub Header 4</div>
            <div class="custom-partner-detail">Detail Header 4</div>
        </div>

        <div class="custom-partner-item" data-partner="5">
            <div class="overlay"></div>
            <div class="custom-partner-img-wrapper">
                <img src="https://via.placeholder.com/180x270" alt="Partner 5" class="custom-partner-img">
            </div>
            <div class="custom-partner-title">Partner 5</div>
            <div class="custom-partner-subtitle">Sub Header 5</div>
            <div class="custom-partner-detail">Detail Header 5</div>
        </div>

        <div class="custom-partner-item" data-partner="6">
            <div class="overlay"></div>
            <div class="custom-partner-img-wrapper">
                <img src="https://via.placeholder.com/180x270" alt="Partner 6" class="custom-partner-img">
            </div>
            <div class="custom-partner-title">Partner 6</div>
            <div class="custom-partner-subtitle">Sub Header 6</div>
            <div class="custom-partner-detail">Detail Header 6</div>
        </div>

        <div class="custom-partner-item" data-partner="7">
            <div class="overlay"></div>
            <div class="custom-partner-img-wrapper">
                <img src="https://via.placeholder.com/180x270" alt="Partner 7" class="custom-partner-img">
            </div>
            <div class="custom-partner-title">Partner 7</div>
            <div class="custom-partner-subtitle">Sub Header 7</div>
            <div class="custom-partner-detail">Detail Header 7</div>
        </div>

        <div class="custom-partner-item" data-partner="8">
            <div class="overlay"></div>
            <div class="custom-partner-img-wrapper">
                <img src="https://via.placeholder.com/180x270" alt="Partner 8" class="custom-partner-img">
            </div>
            <div class="custom-partner-title">Partner 8</div>
            <div class="custom-partner-subtitle">Sub Header 8</div>
            <div class="custom-partner-detail">Detail Header 8</div>
        </div>
    </div>
</div>
<template id="info-panel-template">
    <div class="info-panel-wrapper">
        <div class="info-panel">
            <div class="info-panel-arrow"></div>
            <button class="close-button" aria-label="Close"></button>
            <div class="info-panel-content">
                <!-- Content will be dynamically inserted here -->
            </div>
        </div>
    </div>
</template>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
      let activePanel = null;
      let selectedItem = null;
      const grid = document.querySelector('.custom-partner-grid');
      const items = document.querySelectorAll('.custom-partner-item');

      function scrollToPanel(panel) {
          const panelRect = panel.getBoundingClientRect();
          const offset = panelRect.top + window.scrollY - (window.innerHeight - panelRect.height) / 2;
          window.scrollTo({
              top: offset,
              behavior: 'smooth'
          });
      }

      function createInfoPanel(content, targetItem) {
          const template = document.getElementById('info-panel-template');
          const panel = template.content.cloneNode(true);
          const wrapper = panel.querySelector('.info-panel-wrapper');
          const infoPanel = panel.querySelector('.info-panel');
          const arrow = panel.querySelector('.info-panel-arrow');
          const closeButton = panel.querySelector('.close-button');

          panel.querySelector('.info-panel-content').innerHTML = content;

          const itemRect = targetItem.getBoundingClientRect();
          const gridRect = grid.getBoundingClientRect();
          const arrowLeft = itemRect.left - gridRect.left + (itemRect.width / 2) - 10;
          arrow.style.left = `${arrowLeft}px`;

          return { wrapper, infoPanel, closeButton };
      }

      function closePanel() {
          if (activePanel) {
              const wrapper = activePanel;
              const panel = wrapper.querySelector('.info-panel');

              panel.style.transform = 'translateY(-20px)';
              panel.style.opacity = '0';

              setTimeout(() => {
                  wrapper.style.height = '0';
                  setTimeout(() => {
                      wrapper.remove();
                      activePanel = null;
                  }, 300);
              }, 100);
          }

          if (selectedItem) {
              selectedItem.classList.remove('selected');
              selectedItem = null;
          }

          items.forEach(item => {
              item.querySelector('.overlay').style.opacity = '0';
          });
      }

      items.forEach(item => {
          item.addEventListener('click', function() {
              const partnerId = this.dataset.partner;

              let content;
              switch(partnerId) {
                  case "1":
                      content = `
                          <h2>Partner 1 Specific Information</h2>
                          <p>This is the detailed content for Partner 1.</p>
                          <ul>
                              <li>Specific detail 1</li>
                              <li>Specific detail 2</li>
                          </ul>
                      `;
                      break;
                  case "2":
                      content = `
                          <h2>Partner 2 Specific Information</h2>
                          <p>This is the detailed content for Partner 2.</p>
                          <ul>
                              <li>Partner 2 specific detail</li>
                              <li>More information</li>
                          </ul>
                      `;
                      break;
                  case "3":
                      content = `
                          <h2>Partner 3 Specific Information</h2>
                          <p>Content specific to Partner 3</p>
                          <ul>
                              <li>Partner 3 detail</li>
                              <li>Additional information</li>
                          </ul>
                      `;
                      break;
                  case "4":
                      content = `
                          <h2>Partner 4 Specific Information</h2>
                          <p>Content specific to Partner 4</p>
                          <ul>
                              <li>Partner 4 detail</li>
                              <li>More details here</li>
                          </ul>
                      `;
                      break;
                  case "5":
                      content = `
                          <h2>Partner 5 Specific Information</h2>
                          <p>Content specific to Partner 5</p>
                          <ul>
                              <li>Partner 5 specific info</li>
                              <li>Additional details</li>
                          </ul>
                      `;
                      break;
                  case "6":
                      content = `
                          <h2>Partner 6 Specific Information</h2>
                          <p>Content specific to Partner 6</p>
                          <ul>
                              <li>Partner 6 information</li>
                              <li>More details</li>
                          </ul>
                      `;
                      break;
                  case "7":
                      content = `
                          <h2>Partner 7 Specific Information</h2>
                          <p>Content specific to Partner 7</p>
                          <ul>
                              <li>Partner 7 specific detail</li>
                              <li>Additional information</li>
                          </ul>
                      `;
                      break;
                  case "8":
                      content = `
                          <h2>Partner 8 Specific Information</h2>
                          <p>Content specific to Partner 8</p>
                          <ul>
                              <li>Partner 8 detail</li>
                              <li>More information here</li>
                          </ul>
                      `;
                      break;
                  default:
                      content = `<p>Information not available</p>`;
              }

              if (selectedItem === this) {
                  closePanel();
                  return;
              }

              if (activePanel) {
                  activePanel.remove();
              }

              if (selectedItem) {
                  selectedItem.classList.remove('selected');
              }

              this.classList.add('selected');
              selectedItem = this;

              items.forEach(otherItem => {
                  otherItem.querySelector('.overlay').style.opacity =
                      otherItem !== this ? '1' : '0';
              });

              const { wrapper, infoPanel, closeButton } = createInfoPanel(content, this);

              const itemIndex = Array.from(items).indexOf(this);
              const itemsPerRow = Math.floor(grid.offsetWidth / this.offsetWidth);
              const insertAfterIndex = Math.floor(itemIndex / itemsPerRow) * itemsPerRow + itemsPerRow - 1;
              const referenceNode = items[insertAfterIndex] || items[items.length - 1];

              referenceNode.insertAdjacentElement('afterend', wrapper);
              activePanel = wrapper;

              requestAnimationFrame(() => {
                  wrapper.style.height = `${infoPanel.offsetHeight}px`;
                  infoPanel.classList.add('active');
                  scrollToPanel(wrapper);
              });

              closeButton.addEventListener('click', closePanel);
          });
      });
  });
    </script>
</body>
</html>
